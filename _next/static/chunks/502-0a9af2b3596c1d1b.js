"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{9502:function(e,a,r){r.r(a);var s=r(5893),t=r(5379),l=r.n(t),o=r(7294),d=r(1415),i=r(9633),n=r(8974),c=r(6249),x=r(50),g=r(6947);a.default=e=>{let{token:a,logout:r}=e,[t,u]=(0,o.useState)([]),[m,f]=(0,o.useState)([]),[y,h]=(0,o.useState)([]),[b,j]=(0,o.useState)({name:"",email:"",password:"",user_type:"worker",role_id:"",phone_number:"",job_title:"",shift_time:"",salary:""}),[p,k]=(0,o.useState)(null),[v,N]=(0,o.useState)(null),[w,_]=(0,o.useState)({user_id:"",role_id:""}),[C,E]=(0,o.useState)(null),[S,A]=(0,o.useState)(!1),[U,T]=(0,o.useState)(!1),[O,z]=(0,o.useState)(""),[M,D]=(0,o.useState)(1),[R,F]=(0,o.useState)(!1),[P,B]=(0,o.useState)(!1),[I,L]=(0,o.useState)(!1),[Z,J]=(0,o.useState)(null);(0,o.useEffect)(()=>{a&&(fetchRoles(),fetchUsers())},[a]),(0,o.useEffect)(()=>{if(C){let e=setTimeout(()=>E(null),5e3);return()=>clearTimeout(e)}},[C]),(0,o.useEffect)(()=>{let e=m.filter(e=>{var a;let r=(null===(a=t.find(a=>a._id===e.role_id))||void 0===a?void 0:a.name)||"";return(e.name||"").toLowerCase().includes(O.toLowerCase())||(e.email||"").toLowerCase().includes(O.toLowerCase())||r.toLowerCase().includes(O.toLowerCase())});h(e),D(1)},[O,m,t]);let handleApiError=e=>{if(!e.success)switch(console.error("API Error:",e),e.error){case"DATA_NOT_FOUND":return"Not Found";case"BAD_REQUEST":return e.message||"Invalid input provided";case"ALREADY_EXISTS":return e.message||"User already exists";case"CONFLICT":return e.message||"Please try again";case"FORBIDDEN":return"Access Denied";case"UNAUTHORIZED":return r(),"Please log in to continue";case"MONGO_EXCEPTION":return console.error("MongoDB Error Details:",e.details),"An error occurred";case"DB_ERROR":return e.message||"Database error occurred";default:return"An unexpected error occurred"}return null},fetchRoles=async()=>{try{let e=await fetch("http://192.168.18.107:3000/rolepermission/api/v1/roles/list",{headers:{Authorization:"Bearer ".concat(a)}}),s=await e.json();if(401===e.status){console.log("Unauthorized - logging out"),r();return}if(!e.ok||!s.success){let e=handleApiError(s);throw Error(e||"Failed to fetch roles")}if(s.success&&1===s.type&&s.data)u(s.data.data||[]);else throw Error("Invalid response format")}catch(a){let e=a instanceof Error?a.message:"Unknown error";showMessage(e,!1),console.error("Error fetching roles:",a)}},fetchUsers=async()=>{try{let e=await fetch("http://192.168.18.107:3000/users/api/v1/list",{headers:{Authorization:"Bearer ".concat(a)}}),s=await e.json();if(401===e.status){console.log("Unauthorized - logging out"),r();return}if(!e.ok||!s.success){let e=handleApiError(s);throw Error(e||"Failed to fetch users")}if(s.success&&1===s.type&&s.data){let e=(s.data.data||[]).map(e=>{var a;return{...e,_id:e._id||e.user_id||"",role_id:(null===(a=e.role_id)||void 0===a?void 0:a._id)||e.role_id||null}});f(e),h(e)}else throw Error("Invalid response format")}catch(a){let e=a instanceof Error?a.message:"Error fetching users";showMessage(e,!1),console.error("Error fetching users:",a)}},handleCreateUser=async e=>{if(e.preventDefault(),!b.name.trim()||!b.email.trim()||!b.password.trim()){showMessage("Please fill in all required fields!",!1);return}T(!0);let s={name:b.name.trim(),email:b.email.trim(),password:b.password.trim(),user_type:b.user_type,phone_number:b.phone_number.trim()||void 0,job_title:b.job_title.trim()||void 0,shift_time:b.shift_time.trim()||void 0,salary:b.salary?parseFloat(b.salary):void 0};b.role_id&&(s.role_id=b.role_id);try{let e=await fetch("http://192.168.18.107:3000/users/api/v1/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(s)}),t=await e.json();if(401===e.status){console.log("Unauthorized - logging out"),r();return}if(!e.ok||!t.success){let e=handleApiError(t);throw Error(e||"Failed to create user")}if(t.success&&1===t.type&&t.data){let e=t.data,a=[...m,{...e,_id:e._id||e.user_id||"",role_id:e.role_id||null}];f(a),h(a),j({name:"",email:"",password:"",user_type:"worker",role_id:"",phone_number:"",job_title:"",shift_time:"",salary:""}),F(!1),showMessage("User created successfully!",!0)}else throw Error("Invalid response format")}catch(a){let e=a instanceof Error?a.message:"Error creating user";showMessage(e,!1),console.error("Error creating user:",a)}finally{T(!1)}},handleEditUser=async e=>{var s,t,l;if(e.preventDefault(),!p){showMessage("No user selected for editing!",!1);return}T(!0);let o={_id:p._id};p.name!==(null==v?void 0:v.name)&&(o.name=p.name.trim()),p.email!==(null==v?void 0:v.email)&&(o.email=p.email.trim()),p.password&&(o.password=p.password.trim()),p.user_type!==(null==v?void 0:v.user_type)&&(o.user_type=p.user_type),p.role_id!==(null==v?void 0:v.role_id)&&(o.role_id=p.role_id||void 0),p.phone_number!==(null==v?void 0:v.phone_number)&&(o.phone_number=(null===(s=p.phone_number)||void 0===s?void 0:s.trim())||void 0),p.job_title!==(null==v?void 0:v.job_title)&&(o.job_title=(null===(t=p.job_title)||void 0===t?void 0:t.trim())||void 0),p.shift_time!==(null==v?void 0:v.shift_time)&&(o.shift_time=(null===(l=p.shift_time)||void 0===l?void 0:l.trim())||void 0),p.salary!==(null==v?void 0:v.salary)&&(o.salary=p.salary?parseFloat(p.salary.toString()):void 0);try{let e=await fetch("http://192.168.18.107:3000/users/api/v1/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(o)}),s=await e.json();if(401===e.status){console.log("Unauthorized - logging out"),r();return}if(!e.ok||!s.success){let e=handleApiError(s);throw Error(e||"Failed to update user")}if(s.success&&1===s.type&&s.data){let e=s.data,a=m.map(a=>a._id===p._id?{...a,...e,_id:a._id,role_id:e.role_id||null}:a);f(a),h(a),k(null),N(null),B(!1),showMessage("User updated successfully!",!0)}else throw Error("Invalid response format")}catch(a){let e=a instanceof Error?a.message:"Failed to update user";showMessage(e,!1),console.error("Error updating user:",a)}finally{T(!1)}},handleDeleteUser=async e=>{T(!0);try{let s=await fetch("http://192.168.18.107:3000/users/api/v1/delete",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({id:e})}),t=await s.json();if(401===s.status){console.log("Unauthorized - logging out"),r();return}if(!s.ok||!t.success){let e=handleApiError(t);throw Error(e||"Failed to delete user")}if(t.success){let a=m.filter(a=>a._id!==e);f(a),h(a),showMessage("User deleted successfully!",!0)}else throw Error("Invalid response format")}catch(a){let e=a instanceof Error?a.message:"Error deleting user";showMessage(e,!1),console.error("Error deleting user:",a)}finally{T(!1),L(!1)}},openDeleteModal=e=>{J(e),L(!0)},handleAssignRole=async e=>{if(e.preventDefault(),!w.user_id||!w.role_id){showMessage("Please select a user and role!",!1);return}T(!0);try{var s;let e=await fetch("http://192.168.18.107:3000/users/api/v1/assign-role",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({user_id:w.user_id,role_id:w.role_id})}),t=await e.json();if(401===e.status){console.log("Unauthorized - logging out"),r();return}if(!e.ok||!t.success){let e=handleApiError(t);throw Error(e||"Failed to assign role")}if(t.success&&1===t.type&&t.data&&"object"==typeof t.data&&"data"in t.data&&(null===(s=t.data.data)||void 0===s?void 0:s.user)){let e=t.data.data.user,a=m.map(a=>a._id===w.user_id?{...a,role_id:e.role_id||w.role_id}:a);f(a),h(a),_({user_id:"",role_id:""}),showMessage("Role assigned successfully!",!0)}else throw Error("Invalid response format")}catch(a){let e=a instanceof Error?a.message:"Error assigning role";showMessage(e,!1),console.error("Error assigning role:",a)}finally{T(!1)}},showMessage=(e,a)=>{E(e),A(a)},W=6*M,q=W-6,H=y.slice(q,W),X=Math.ceil(y.length/6),paginate=e=>D(e);return(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 max-w-7xl mx-auto p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 flex justify-between items-center mb-8",children:[(0,s.jsx)("h2",{className:"jsx-6501d104f672a5c7 text-2xl font-bold text-gray-900 dark:text-white",children:"User Management"}),(0,s.jsxs)("button",{onClick:()=>F(!0),className:"jsx-6501d104f672a5c7 bg-indigo-600 text-white px-5 py-2.5 rounded-lg text-sm font-semibold hover:bg-indigo-700 transition-colors duration-200 flex items-center gap-2 shadow-md",children:[(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-6501d104f672a5c7 w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4",className:"jsx-6501d104f672a5c7"})}),"Add New User"]})]}),R&&(0,s.jsx)("div",{className:"jsx-6501d104f672a5c7 fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 transition-opacity duration-300",children:(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 bg-white dark:bg-gray-800 rounded-xl p-8 w-full max-w-lg shadow-2xl transform transition-all duration-300 scale-100",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 flex justify-between items-center mb-6 border-b border-gray-200 dark:border-gray-700 pb-4",children:[(0,s.jsx)("h3",{className:"jsx-6501d104f672a5c7 text-xl font-bold text-gray-900 dark:text-white",children:"Create New User"}),(0,s.jsx)("button",{onClick:()=>F(!1),className:"jsx-6501d104f672a5c7 text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-white transition-colors",children:(0,s.jsx)(d.Z,{className:"w-6 h-6"})})]}),(0,s.jsxs)("form",{onSubmit:handleCreateUser,className:"jsx-6501d104f672a5c7 space-y-6",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:b.name,onChange:e=>j({...b,name:e.target.value}),placeholder:"Full Name",required:!0,className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",value:b.email,onChange:e=>j({...b,email:e.target.value}),placeholder:"Email Address",required:!0,className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),(0,s.jsx)("input",{type:"password",value:b.password,onChange:e=>j({...b,password:e.target.value}),placeholder:"Password",required:!0,className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"User Type"}),(0,s.jsx)("input",{type:"text",value:"Worker",disabled:!0,className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role (Optional)"}),(0,s.jsxs)("select",{value:b.role_id,onChange:e=>j({...b,role_id:e.target.value}),className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600",children:[(0,s.jsx)("option",{value:"",className:"jsx-6501d104f672a5c7",children:"Select Role"}),Array.isArray(t)&&t.map(e=>(0,s.jsx)("option",{value:e._id,className:"jsx-6501d104f672a5c7",children:e.name},e._id))]})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number (Optional)"}),(0,s.jsx)("input",{type:"tel",value:b.phone_number,onChange:e=>j({...b,phone_number:e.target.value}),placeholder:"Phone Number",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Job Title (Optional)"}),(0,s.jsx)("input",{type:"text",value:b.job_title,onChange:e=>j({...b,job_title:e.target.value}),placeholder:"Job Title",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Shift Time (Optional)"}),(0,s.jsx)("input",{type:"text",value:b.shift_time,onChange:e=>j({...b,shift_time:e.target.value}),placeholder:"Shift Time",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Salary (Optional)"}),(0,s.jsx)("input",{type:"number",value:b.salary,onChange:e=>j({...b,salary:e.target.value}),placeholder:"Salary",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 flex justify-end space-x-4 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>F(!1),className:"jsx-6501d104f672a5c7 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors duration-200",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:U,className:"jsx-6501d104f672a5c7 bg-indigo-600 text-white px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200 disabled:bg-indigo-400 flex items-center gap-2",children:U?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-6501d104f672a5c7 animate-spin w-5 h-5",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-6501d104f672a5c7 opacity-25"}),(0,s.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z",className:"jsx-6501d104f672a5c7 opacity-75"})]}),"Creating..."]}):"Create User"})]})]})]})}),P&&p&&(0,s.jsx)("div",{className:"jsx-6501d104f672a5c7 fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 transition-opacity duration-300",children:(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 bg-white dark:bg-gray-800 rounded-xl p-8 w-full max-w-lg shadow-2xl transform transition-all duration-300 scale-100",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 flex justify-between items-center mb-6 border-b border-gray-200 dark:border-gray-700 pb-4",children:[(0,s.jsx)("h3",{className:"jsx-6501d104f672a5c7 text-xl font-bold text-gray-900 dark:text-white",children:"Edit User"}),(0,s.jsx)("button",{onClick:()=>{B(!1),N(null)},className:"jsx-6501d104f672a5c7 text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-white transition-colors",children:(0,s.jsx)(d.Z,{className:"w-6 h-6"})})]}),(0,s.jsxs)("form",{onSubmit:handleEditUser,className:"jsx-6501d104f672a5c7 space-y-6",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:p.name,onChange:e=>k({...p,name:e.target.value}),placeholder:"Full Name",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",value:p.email,onChange:e=>k({...p,email:e.target.value}),placeholder:"Email Address",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password (Optional)"}),(0,s.jsx)("input",{type:"password",value:p.password||"",onChange:e=>k({...p,password:e.target.value||void 0}),placeholder:"Password",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"User Type"}),(0,s.jsx)("input",{type:"text",value:"Worker",disabled:!0,className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role (Optional)"}),(0,s.jsxs)("select",{value:p.role_id||"",onChange:e=>k({...p,role_id:e.target.value||null}),className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600",children:[(0,s.jsx)("option",{value:"",className:"jsx-6501d104f672a5c7",children:"Select Role"}),Array.isArray(t)&&t.map(e=>(0,s.jsx)("option",{value:e._id,className:"jsx-6501d104f672a5c7",children:e.name},e._id))]})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number (Optional)"}),(0,s.jsx)("input",{type:"tel",value:p.phone_number||"",onChange:e=>k({...p,phone_number:e.target.value||void 0}),placeholder:"Phone Number",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Job Title (Optional)"}),(0,s.jsx)("input",{type:"text",value:p.job_title||"",onChange:e=>k({...p,job_title:e.target.value||void 0}),placeholder:"Job Title",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Shift Time (Optional)"}),(0,s.jsx)("input",{type:"text",value:p.shift_time||"",onChange:e=>k({...p,shift_time:e.target.value||void 0}),placeholder:"Shift Time",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Salary (Optional)"}),(0,s.jsx)("input",{type:"number",value:p.salary||"",onChange:e=>k({...p,salary:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"Salary",className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"})]})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 flex justify-end space-x-4 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{B(!1),N(null)},className:"jsx-6501d104f672a5c7 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors duration-200",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:U,className:"jsx-6501d104f672a5c7 bg-indigo-600 text-white px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200 disabled:bg-indigo-400 flex items-center gap-2",children:U?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-6501d104f672a5c7 animate-spin w-5 h-5",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-6501d104f672a5c7 opacity-25"}),(0,s.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z",className:"jsx-6501d104f672a5c7 opacity-75"})]}),"Updating..."]}):"Update User"})]})]})]})}),I&&(0,s.jsx)("div",{className:"jsx-6501d104f672a5c7 fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 transition-opacity duration-300",children:(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl w-96 max-w-md",children:[(0,s.jsx)("h3",{className:"jsx-6501d104f672a5c7 text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Confirm Delete"}),(0,s.jsx)("p",{className:"jsx-6501d104f672a5c7 text-sm text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this user? This action cannot be undone."}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 flex justify-end space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{J(null),L(!1)},className:"jsx-6501d104f672a5c7 px-4 py-2 text-sm rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors duration-200",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:()=>{Z&&handleDeleteUser(Z)},disabled:U,className:"jsx-6501d104f672a5c7 px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 transition-colors duration-200 flex items-center gap-2",children:U?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-6501d104f672a5c7 animate-spin w-5 h-5",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-6501d104f672a5c7 opacity-25"}),(0,s.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z",className:"jsx-6501d104f672a5c7 opacity-75"})]}),"Deleting..."]}):"Delete"})]})]})}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 mb-8 bg-gray-50 dark:bg-gray-700 rounded-xl p-6 shadow-sm",children:[(0,s.jsx)("h3",{className:"jsx-6501d104f672a5c7 text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Assign Role to User"}),(0,s.jsxs)("form",{onSubmit:handleAssignRole,className:"jsx-6501d104f672a5c7 space-y-6",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select User"}),(0,s.jsxs)("select",{value:w.user_id||"",onChange:e=>_({...w,user_id:e.target.value}),required:!0,className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-500",children:[(0,s.jsx)("option",{value:"",className:"jsx-6501d104f672a5c7",children:"Select User"}),m.map(e=>(0,s.jsxs)("option",{value:e._id,className:"jsx-6501d104f672a5c7",children:[e.name," (",e.email,")"]},e._id))]})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Role"}),(0,s.jsxs)("select",{value:w.role_id||"",onChange:e=>_({...w,role_id:e.target.value}),required:!0,className:"jsx-6501d104f672a5c7 w-full p-3 text-sm rounded-lg bg-gray-100 dark:bg-gray-600 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-500",children:[(0,s.jsx)("option",{value:"",className:"jsx-6501d104f672a5c7",children:"Select Role"}),Array.isArray(t)&&t.map(e=>(0,s.jsx)("option",{value:e._id,className:"jsx-6501d104f672a5c7",children:e.name},e._id))]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:U,className:"jsx-6501d104f672a5c7 bg-indigo-600 text-white px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200 disabled:bg-indigo-400 flex items-center gap-2",children:U?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-6501d104f672a5c7 animate-spin w-5 h-5",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-6501d104f672a5c7 opacity-25"}),(0,s.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-16 0z",className:"jsx-6501d104f672a5c7 opacity-75"})]}),"Assigning..."]}):"Assign Role"})]})]}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7",children:[(0,s.jsx)("h3",{className:"jsx-6501d104f672a5c7 text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Existing Users"}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 w-full sm:w-80 relative",children:[(0,s.jsx)("label",{className:"jsx-6501d104f672a5c7 block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search Users"}),(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 relative",children:[(0,s.jsx)("input",{type:"text",value:O,onChange:e=>z(e.target.value),placeholder:"Search by name, email, or role...",className:"jsx-6501d104f672a5c7 w-full p-3 pl-10 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors border border-gray-300 dark:border-gray-600"}),(0,s.jsx)(i.Z,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]})]}),X>1&&(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>paginate(M-1),disabled:1===M,className:"jsx-6501d104f672a5c7 px-4 py-2 text-sm rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Previous"}),Array.from({length:X},(e,a)=>a+1).map(e=>(0,s.jsx)("button",{onClick:()=>paginate(e),className:"jsx-6501d104f672a5c7 "+"px-4 py-2 text-sm rounded-lg ".concat(M===e?"bg-indigo-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500"," transition-colors duration-200"),children:e},e)),(0,s.jsx)("button",{onClick:()=>paginate(M+1),disabled:M===X,className:"jsx-6501d104f672a5c7 px-4 py-2 text-sm rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Next"})]})]}),0===H.length?(0,s.jsx)("p",{className:"jsx-6501d104f672a5c7 text-sm text-gray-500 dark:text-gray-400 text-center py-8",children:"No users found"}):(0,s.jsx)("div",{className:"jsx-6501d104f672a5c7 overflow-x-auto rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("table",{className:"jsx-6501d104f672a5c7 w-full text-left text-sm",children:[(0,s.jsx)("thead",{className:"jsx-6501d104f672a5c7",children:(0,s.jsxs)("tr",{className:"jsx-6501d104f672a5c7 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 uppercase tracking-wider text-xs font-semibold",children:[(0,s.jsx)("th",{className:"jsx-6501d104f672a5c7 py-4 px-6",children:"Name"}),(0,s.jsx)("th",{className:"jsx-6501d104f672a5c7 py-4 px-6",children:"Email"}),(0,s.jsx)("th",{className:"jsx-6501d104f672a5c7 py-4 px-6",children:"Type"}),(0,s.jsx)("th",{className:"jsx-6501d104f672a5c7 py-4 px-6",children:"Role"}),(0,s.jsx)("th",{className:"jsx-6501d104f672a5c7 py-4 px-6 text-right",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"jsx-6501d104f672a5c7",children:H.map(e=>{var a;return e&&e._id?(0,s.jsxs)("tr",{className:"jsx-6501d104f672a5c7 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-150",children:[(0,s.jsx)("td",{className:"jsx-6501d104f672a5c7 py-4 px-6 text-gray-900 dark:text-gray-200",children:e.name||"N/A"}),(0,s.jsx)("td",{className:"jsx-6501d104f672a5c7 py-4 px-6 text-gray-900 dark:text-gray-200",children:e.email||"N/A"}),(0,s.jsx)("td",{className:"jsx-6501d104f672a5c7 py-4 px-6 text-gray-900 dark:text-gray-200",children:e.user_type||"N/A"}),(0,s.jsx)("td",{className:"jsx-6501d104f672a5c7 py-4 px-6 text-gray-900 dark:text-gray-200",children:(null===(a=t.find(a=>a._id===e.role_id))||void 0===a?void 0:a.name)||"N/A"}),(0,s.jsxs)("td",{className:"jsx-6501d104f672a5c7 py-4 px-6 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{k({...e,password:""}),N(e),B(!0)},title:"Edit User",className:"jsx-6501d104f672a5c7 text-indigo-600 hover:text-indigo-800 transition-colors duration-200",children:(0,s.jsx)(n.Z,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>openDeleteModal(e._id),disabled:U,title:"Delete User",className:"jsx-6501d104f672a5c7 text-red-600 hover:text-red-800 transition-colors duration-200",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})})]})]},e._id):null})})]})})]}),C&&(0,s.jsxs)("div",{className:"jsx-6501d104f672a5c7 "+"fixed bottom-6 right-6 p-4 rounded-lg shadow-xl text-sm flex items-center space-x-3 animate-slide-in-right ".concat(S?"bg-green-600 dark:bg-green-700 text-white":"bg-red-600 dark:bg-red-700 text-white"),children:[S?(0,s.jsx)(x.Z,{className:"w-6 h-6"}):(0,s.jsx)(g.Z,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"jsx-6501d104f672a5c7",children:C}),(0,s.jsx)("button",{type:"button",onClick:()=>E(null),className:"jsx-6501d104f672a5c7 ml-2 text-white hover:opacity-80 transition-opacity",children:(0,s.jsx)(d.Z,{className:"w-5 h-5"})})]})]}),(0,s.jsx)(l(),{id:"6501d104f672a5c7",children:"@-webkit-keyframes slide-in-right{0%{-webkit-transform:translatex(100%);transform:translatex(100%);opacity:0}100%{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slide-in-right{0%{-moz-transform:translatex(100%);transform:translatex(100%);opacity:0}100%{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slide-in-right{0%{-o-transform:translatex(100%);transform:translatex(100%);opacity:0}100%{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slide-in-right{0%{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%);opacity:0}100%{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}.animate-slide-in-right.jsx-6501d104f672a5c7{-webkit-animation:slide-in-right.3s ease-out;-moz-animation:slide-in-right.3s ease-out;-o-animation:slide-in-right.3s ease-out;animation:slide-in-right.3s ease-out}"})]})}}}]);