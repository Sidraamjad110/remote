"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{5818:function(e,t,r){r.r(t),r.d(t,{default:function(){return Products}});var a=r(5893),s=r(7294),d=r(6445),l=r(5848),i=r(9204),c=r(5349),o=r(4601),n=r(2743),u=r(6501),m=r(9900);function Products(e){let{token:t,isAuthenticated:r,logout:g,categories:x,setFormMode:h,filterCategory:p,setFilterCategory:y,isFormActive:b}=e,[f,v]=(0,s.useState)([]),[j,N]=(0,s.useState)(!0),[k,w]=(0,s.useState)(null),[P,E]=(0,s.useState)(1),[_,U]=(0,s.useState)(!1),[A,C]=(0,s.useState)(null),[S,D]=(0,s.useState)(""),[F,R]=(0,s.useState)(!1),[Z,I]=(0,s.useState)(null),[L,O]=(0,s.useState)(null),[T,z]=(0,s.useState)(""),[q,B]=(0,s.useState)(""),[M,$]=(0,s.useState)(""),[K,X]=(0,s.useState)(""),[Y,G]=(0,s.useState)(null),[H,J]=(0,s.useState)(void 0),[Q,V]=(0,s.useState)(null),[W,ee]=(0,s.useState)(""),[et,er]=(0,s.useState)(""),[ea,es]=(0,s.useState)(""),[ed,el]=(0,s.useState)(""),[ei,ec]=(0,s.useState)(null),[eo,en]=(0,s.useState)(void 0),[eu,em]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!r||!t){N(!1);return}let fetchData=async()=>{try{w(null);let e=await (0,m.t2)(t,g,x,"all"!==p?p:void 0);v(e),w(0===e.length&&"all"!==p?"No products exist for this category":null)}catch(e){w(e instanceof Error?e.message:"Failed to fetch products")}finally{N(!1)}};fetchData()},[r,t,g,x,p]),(0,s.useEffect)(()=>{let e=Math.ceil(f.length/10);P>e&&e>0?E(e):0===f.length&&E(1)},[f,P]),(0,s.useEffect)(()=>{b||resetForm()},[b]),(0,s.useEffect)(()=>()=>{H&&URL.revokeObjectURL(H),eo&&URL.revokeObjectURL(eo)},[H,eo]);let handleFilterChange=async e=>{if(!r||!t){u.ZP.error("Please log in to filter products");return}y(e.target.value),E(1)},handleDeleteProduct=(e,t)=>{C(e),D(t),U(!0)},confirmDelete=async()=>{if(!r||!t||!A){u.ZP.error("Please log in to delete");return}try{w(null),await (0,m.Ir)(t,g,A),v(f.filter(e=>e._id!==A)),u.ZP.success("Product deleted successfully")}catch(e){w(e instanceof Error?e.message:"Failed to delete product")}finally{U(!1),C(null),D("")}},showProductDetails=e=>{I(e),R(!0)},handleAddProduct=async e=>{if(e.preventDefault(),!r||!t){u.ZP.error("Please log in to add a product");return}if(!T.trim()||!q.trim()||!M||!K.trim()||!Y){u.ZP.error("All fields, including an image, are required");return}let a=parseFloat(q);if(isNaN(a)||a<=0){u.ZP.error("Price must be a valid positive number");return}try{em(null);let e=new FormData;e.append("name",T),e.append("price",q),e.append("category_id",M),e.append("description",K),e.append("picture",Y);let r=await (0,m.gK)(t,g,x,e);v([...f,r]),resetForm(),u.ZP.success("Product added successfully")}catch(t){let e=t instanceof Error?t.message:"Failed to add product";em(e),u.ZP.error(e)}},handleEditProduct=e=>{V(e._id),ee(e.name),er(e.price.toString()),es(e.category_id),el(e.description),ec(null),en(e.pictureUrl||void 0),O("edit"),h("edit",e)},handleSaveEditProduct=async e=>{if(e.preventDefault(),!r||!t||!Q){u.ZP.error("Please log in to update a product");return}if(!W.trim()||!et.trim()||!ea||!ed.trim()){u.ZP.error("All fields are required");return}let a=parseFloat(et);if(isNaN(a)||a<=0){u.ZP.error("Price must be a valid positive number");return}try{em(null);let e=new FormData;e.append("id",Q),e.append("name",W),e.append("price",et),e.append("category_id",ea),e.append("description",ed),ei&&e.append("picture",ei);let r=await (0,m.nM)(t,g,x,e);v(f.map(e=>e._id===Q?r:e)),resetForm(),u.ZP.success("Product updated successfully")}catch(t){let e=t instanceof Error?t.message:"Failed to update product";em(e),u.ZP.error(e)}},resetForm=()=>{O(null),z(""),B(""),$(""),X(""),H&&URL.revokeObjectURL(H),G(null),J(void 0),V(null),ee(""),er(""),es(""),el(""),eo&&URL.revokeObjectURL(eo),ec(null),en(void 0),em(null),w(null),h(null)},handleImageChange=(e,t)=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(a){let e=URL.createObjectURL(a);t?(eo&&URL.revokeObjectURL(eo),ec(a),en(e)):(H&&URL.revokeObjectURL(H),G(a),J(e))}else t?(eo&&URL.revokeObjectURL(eo),ec(null),en(void 0)):(H&&URL.revokeObjectURL(H),G(null),J(void 0))},eg=10*P,ex=eg-10,eh=f.slice(ex,eg),ep=Math.ceil(f.length/10);return j?(0,a.jsx)("div",{className:"lg:col-span-3 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-lg"}),[,,,,].fill(0).map((e,t)=>(0,a.jsx)("div",{className:"h-40 bg-gray-200 dark:bg-gray-700 rounded-lg"},t))]})}):(0,a.jsxs)("div",{className:"lg:col-span-3 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-200 dark:border-gray-700 h-full relative",children:[(0,a.jsxs)("div",{className:"absolute inset-0 z-10 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-y-auto",style:{display:L?"block":"none"},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"add"===L?"Add Product":"Edit Product"}),(0,a.jsx)("button",{onClick:resetForm,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,a.jsx)(d.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:"add"===L?handleAddProduct:handleSaveEditProduct,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Product Name"}),(0,a.jsx)("input",{type:"text",value:"edit"===L?W:T,onChange:e=>"edit"===L?ee(e.target.value):z(e.target.value),placeholder:"Enter product name",className:"input-field",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price"}),(0,a.jsx)("input",{type:"number",value:"edit"===L?et:q,onChange:e=>"edit"===L?er(e.target.value):B(e.target.value),placeholder:"Price",className:"input-field",step:"0.01",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),(0,a.jsxs)("select",{value:"edit"===L?ea:M,onChange:e=>"edit"===L?es(e.target.value):$(e.target.value),className:"input-field",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),x.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:"edit"===L?ed:K,onChange:e=>"edit"===L?el(e.target.value):X(e.target.value),placeholder:"Enter product description",className:"input-field",rows:3,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Upload Image"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"file",onChange:e=>handleImageChange(e,"edit"===L),className:"hidden",id:"imageUpload",accept:"image/jpeg,image/png,image/webp",required:"add"===L}),(0,a.jsxs)("label",{htmlFor:"imageUpload",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 cursor-pointer flex items-center",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{children:"Upload"})]}),"edit"===L&&eo||"add"===L&&H?(0,a.jsx)("img",{src:"edit"===L?eo:H,alt:"Preview",className:"h-16 w-auto rounded"}):(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No image selected"})]})]}),eu&&(0,a.jsx)("div",{className:"text-red-500 dark:text-red-400 text-sm text-center",children:eu}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:resetForm,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center",children:"edit"===L?"Save Changes":"Add Product"})]})]})]}),(0,a.jsxs)("div",{className:"relative z-0",style:{opacity:L?.5:1,pointerEvents:L?"none":"auto"},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,a.jsx)("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 p-2 rounded-lg mr-2",children:"Products"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[f.length," items"]})]}),(0,a.jsxs)("button",{onClick:()=>{O("add"),h("add")},className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"text-sm",children:"Add Product"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filter by Category"}),(0,a.jsxs)("select",{value:p,onChange:handleFilterChange,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),x.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),eh.length>0?(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:eh.map(e=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:scale-[1.02] hover:shadow-lg transition-all duration-300",children:[(0,a.jsx)("div",{className:"relative h-32 cursor-pointer",onClick:()=>showProductDetails(e),children:e.pictureUrl?(0,a.jsx)("img",{src:e.pictureUrl,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/150?text-No+Image"}}):(0,a.jsx)("div",{className:"text-gray-600 dark:text-gray-400 text-gray-200 dark:text-gray-600",children:(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"No Image"})})}),(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("h3",{className:"text-md font-semibold text-gray-dark:text-white truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center mt-2 justify-between",children:[(0,a.jsx)("p",{className:"text-blue-400 dark:text-blue-600 font-medium text-sm",children:e.displayPrice}),(0,a.jsx)("p",{className:"text-gray-400 dark:text-gray-500 text-xs",children:e.categoryName})]}),(0,a.jsxs)("div",{className:"mt-2 flex justify-end space-x-2",children:[(0,a.jsx)("button",{onClick:()=>handleEditProduct(e),className:"text-blue-600 dark:hover:text-blue-400 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50",title:"Edit",children:(0,a.jsx)(i.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>handleDeleteProduct(e._id,e.name),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50",title:"Delete",children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})})]})]})]},"product-".concat(e._id)))}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:k||"No products available"}),k&&eh.length>0&&(0,a.jsx)("div",{className:"mt-4 text-red-500 dark:text-red-400 text-center text-sm",children:k}),ep>1&&(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4 px-4",children:[(0,a.jsxs)("button",{onClick:()=>E(e=>Math.max(e-1,1)),disabled:1===P,className:"flex items-center px-3 py-1 rounded-lg ".concat(1===P?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),"Previous"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Page ",P," of ",ep]}),(0,a.jsxs)("button",{onClick:()=>E(e=>Math.min(e+1,ep)),disabled:P===ep,className:"flex items-center px-3 py-1 rounded-lg ".concat(P===ep?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700"),children:["Next",(0,a.jsx)(n.Z,{className:"w-4 h-4 ml-1"})]})]})]}),_&&A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-200 dark:border-gray-700 p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Confirm Deletion"}),(0,a.jsx)("button",{onClick:()=>{U(!1),C(null),D(""),w(null)},className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,a.jsx)(d.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:['Are you sure you want to delete the product "',S,'"?']}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{U(!1),C(null),D(""),w(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,a.jsx)("button",{onClick:confirmDelete,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",children:"Yes, Delete"})]})]})]})}),F&&Z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-200 dark:border-gray-700 p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Product Details"}),(0,a.jsx)("button",{onClick:()=>{R(!1),I(null)},className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,a.jsx)(d.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"mb-4",children:Z.pictureUrl?(0,a.jsx)("img",{src:Z.pictureUrl,alt:Z.name,className:"w-full h-48 object-contain rounded-lg",onError:e=>{e.currentTarget.src="https://via.placeholder.com/150?text-No+Image"}}):(0,a.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-gray-200 dark:bg-gray-600 rounded-lg",children:(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"No Image Available"})})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Name"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Z.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Price"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:Z.displayPrice})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Category"}),(0,a.jsx)("p",{className:"text-lg text-gray-900 dark:text-white",children:Z.categoryName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:Z.description||"No description provided"})]})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>{R(!1),I(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Close"})})]})]})})]})}},9900:function(e,t,r){r.d(t,{Ir:function(){return deleteProduct},gK:function(){return addProduct},nM:function(){return updateProduct},t2:function(){return fetchProducts}});var a=r(6501),s=r(3454);let handleApiError=(e,t)=>{if(!e.success)switch(e.error){case"DATA_NOT_FOUND":return"Not Found";case"BAD_REQUEST":return e.message||"Invalid input provided";case"ALREADY_EXISTS":return e.message||"Product name already exists";case"CONFLICT":return e.message||"Please try again";case"FORBIDDEN":return"Access Denied";case"UNAUTHORIZED":return t(),window.location.href="/pos-system/login","Please log in to continue";case"MONGO_EXCEPTION":return"Database error occurred";case"DB_ERROR":return e.message||"Database error occurred";default:return"An unexpected error occurred"}return""},d=s.env.REACT_APP_API_URL||"http://192.168.18.107:3000",fetchProducts=async(e,t,r,s)=>{try{var l;let a=new URL("".concat(d,"/products/api/v1/list"));s&&a.searchParams.append("category_id",s);let i=await fetch(a.toString(),{headers:{Authorization:"Bearer ".concat(e)}});if(401===i.status)throw t(),window.location.href="/pos-system/login",Error("Unauthorized");let c=await i.json();if(!i.ok||!c.success)throw Error(handleApiError(c,t));if(1!==c.type||!(null===(l=c.data)||void 0===l?void 0:l.data))throw Error("Invalid response format");return c.data.data.map(e=>{var t;if("number"!=typeof e.price)throw Error("Invalid price for product ".concat(e.name));return{_id:e._id,name:e.name,price:e.price,category_id:e.category_id,categoryName:(null===(t=r.find(t=>t._id===e.category_id))||void 0===t?void 0:t.name)||"Unknown",description:e.description||"",pictureUrl:e.pictureUrl||null,created_by:e.created_by,createdAt:e.createdAt,updatedAt:e.updatedAt,displayPrice:"$".concat(e.price.toFixed(2))}})}catch(t){let e=t instanceof Error?t.message:"Failed to fetch products";throw a.ZP.error(e),t}},addProduct=async(e,t,r,s)=>{try{var l,i;let a=await fetch("".concat(d,"/products/api/v1/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s});if(401===a.status)throw t(),window.location.href="/pos-system/login",Error("Unauthorized");let c=await a.json();if(!a.ok||!c.success)throw Error(handleApiError(c,t));if(1!==c.type||!(null===(l=c.data)||void 0===l?void 0:l.data))throw Error("Invalid response format");let o=c.data.data;if("number"!=typeof o.price)throw Error("Invalid price for product ".concat(o.name));let n=s.get("category_id");return{_id:o._id,name:o.name,price:o.price,category_id:o.category_id,categoryName:(null===(i=r.find(e=>e._id===n))||void 0===i?void 0:i.name)||"Unknown",description:o.description||"",pictureUrl:o.pictureUrl||null,created_by:o.created_by,createdAt:o.createdAt,updatedAt:o.updatedAt,displayPrice:"$".concat(o.price.toFixed(2))}}catch(t){let e=t instanceof Error?t.message:"Failed to add product";throw a.ZP.error(e),t}},updateProduct=async(e,t,r,s)=>{try{var l,i;let a=await fetch("".concat(d,"/products/api/v1/update"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e)},body:s});if(401===a.status)throw t(),window.location.href="/pos-system/login",Error("Unauthorized");let c=await a.json();if(!a.ok||!c.success)throw Error(handleApiError(c,t));if(1!==c.type||!(null===(l=c.data)||void 0===l?void 0:l.data))throw Error("Invalid response format");let o=c.data.data;if("number"!=typeof o.price)throw Error("Invalid price for product ".concat(o.name));let n=s.get("category_id");return{_id:o._id,name:o.name,price:o.price,category_id:o.category_id,categoryName:(null===(i=r.find(e=>e._id===n))||void 0===i?void 0:i.name)||"Unknown",description:o.description||"",pictureUrl:o.pictureUrl||null,created_by:o.created_by,createdAt:o.createdAt,updatedAt:o.updatedAt,displayPrice:"$".concat(o.price.toFixed(2))}}catch(t){let e=t instanceof Error?t.message:"Failed to update product";throw a.ZP.error(e),t}},deleteProduct=async(e,t,r)=>{try{let a=await fetch("".concat(d,"/products/api/v1/delete"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({id:r})});if(401===a.status)throw t(),window.location.href="/pos-system/login",Error("Unauthorized");let s=await a.json();if(!a.ok||!s.success)throw Error(handleApiError(s,t));if(1!==s.type)throw Error("Invalid response format")}catch(t){let e=t instanceof Error?t.message:"Failed to delete product";throw a.ZP.error(e),t}}}}]);